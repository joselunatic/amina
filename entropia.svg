<svg width="800" height="600" viewBox="0 0 800 600" xmlns="http://www.w3.org/2000/svg" id="amina_spatial_layout">
  <style>
    /* Estilos de Estado para Integración JS */
    .zone_shape { transition: fill 0.3s, stroke 0.3s; fill: rgba(0, 20, 0, 0.6); }
    
    /* Estados de Integridad de Membrana */
    .normal { stroke: #006622; fill: rgba(0, 30, 0, 0.4); }
    .alert { stroke: #aa8800; fill: rgba(40, 30, 0, 0.4); }
    .lockdown { stroke: #aa2200; fill: rgba(40, 0, 0, 0.5); }
    
    /* Tipografía y UI */
    .label_text { fill: #00cc44; font-family: 'JetBrains Mono', monospace; font-size: 10px; pointer-events: none; text-transform: uppercase; letter-spacing: 1px; }
    .sub_text { fill: #006622; font-family: 'JetBrains Mono', monospace; font-size: 7px; pointer-events: none; }
    .hitbox { fill: transparent; pointer-events: all; cursor: crosshair; }
    .corridor { stroke: #003311; stroke-width: 1.5; fill: none; }
  </style>

  <defs>
    <!-- Filtro de brillo sutil exclusivo para geometrías -->
    <filter id="glow_subtle" x="-20%" y="-20%" width="140%" height="140%">
      <feGaussianBlur stdDeviation="2" result="blur"/>
      <feComposite in="SourceGraphic" in2="blur" operator="over"/>
    </filter>
    
    <!-- Patrón de rejilla técnica -->
    <pattern id="grid_tech" width="40" height="40" patternUnits="userSpaceOnUse">
      <path d="M 40 0 L 0 0 0 40" fill="none" stroke="#001500" stroke-width="0.5"/>
    </pattern>
  </defs>

  <!-- CAPA 0: FONDO ESTRUCTURAL -->
  <rect width="800" height="600" fill="#000500" />
  <rect width="800" height="600" fill="url(#grid_tech)" />

  <!-- CAPA 1: CONEXIONES (CORREDORES) -->
  <g id="system_corridors" class="corridor">
    <path d="M 400 245 V 130" /> <!-- CMD a LAB -->
    <path d="M 450 280 L 550 210" /> <!-- CMD a ARM -->
    <path d="M 450 320 L 550 390" /> <!-- CMD a GAR -->
    <path d="M 400 355 V 470" /> <!-- CMD a MED -->
    <path d="M 350 300 H 250" /> <!-- CMD a SEC -->
  </g>

  <!-- CAPA 2: GEOMETRÍA DE ZONAS (Con IDs Canónicos) -->
  
  <!-- ZONE_CMD: Centro de Análisis de Misiones -->
  <g id="zone_cmd" class="zone-group">
    <polygon points="400,245 450,275 450,325 400,355 350,325 350,275" class="zone_shape normal" filter="url(#glow_subtle)" />
    <circle id="zone_cmd_anchor" cx="400" cy="300" r="1" opacity="0" />
    <text x="400" y="295" class="label_text" text-anchor="middle">COMMAND</text>
    <text x="400" y="310" class="sub_text" text-anchor="middle">NÚCLEO AMINA</text>
    <rect x="350" y="245" width="100" height="110" class="hitbox" />
  </g>

  <!-- ZONE_LAB: Investigación OV-ESK / ORDO -->
  <g id="zone_lab" class="zone-group">
    <rect x="320" y="60" width="160" height="70" class="zone_shape normal" filter="url(#glow_subtle)" />
    <circle id="zone_lab_anchor" cx="400" cy="95" r="1" opacity="0" />
    <text x="400" y="95" class="label_text" text-anchor="middle">LABORATORY</text>
    <text x="400" y="108" class="sub_text" text-anchor="middle">SISTEMA ORDO</text>
    <rect x="320" y="60" width="160" height="70" class="hitbox" />
  </g>

  <!-- ZONE_ARM: Armería / Recursos MEL -->
  <g id="zone_arm" class="zone-group">
    <rect x="550" y="160" width="140" height="90" class="zone_shape normal" filter="url(#glow_subtle)" />
    <circle id="zone_arm_anchor" cx="620" cy="205" r="1" opacity="0" />
    <text x="620" y="200" class="label_text" text-anchor="middle">ARMORY</text>
    <text x="620" y="213" class="sub_text" text-anchor="middle">PROTOCOLOS MEL</text>
    <rect x="550" y="160" width="140" height="90" class="hitbox" />
  </g>

  <!-- ZONE_GAR: Despliegue de Operaciones -->
  <g id="zone_gar" class="zone-group">
    <rect x="550" y="350" width="140" height="90" class="zone_shape normal" filter="url(#glow_subtle)" />
    <circle id="zone_gar_anchor" cx="620" cy="395" r="1" opacity="0" />
    <text x="620" y="390" class="label_text" text-anchor="middle">GARAGE</text>
    <text x="620" y="403" class="sub_text" text-anchor="middle">ACCESO EXTERNO</text>
    <rect x="550" y="350" width="140" height="90" class="hitbox" />
  </g>

  <!-- ZONE_MED: Soporte Vital de Membrana -->
  <g id="zone_med" class="zone-group">
    <rect x="320" y="470" width="160" height="70" class="zone_shape normal" filter="url(#glow_subtle)" />
    <circle id="zone_med_anchor" cx="400" cy="505" r="1" opacity="0" />
    <text x="400" y="505" class="label_text" text-anchor="middle">MEDICAL</text>
    <text x="400" y="518" class="sub_text" text-anchor="middle">ESTADO_AGENTE</text>
    <rect x="320" y="470" width="160" height="70" class="hitbox" />
  </g>

  <!-- ZONE_SEC: Seguridad y Confinamiento -->
  <g id="zone_sec" class="zone-group">
    <rect x="110" y="180" width="140" height="240" class="zone_shape normal" filter="url(#glow_subtle)" />
    <circle id="zone_sec_anchor" cx="180" cy="300" r="1" opacity="0" />
    <text x="180" y="295" class="label_text" text-anchor="middle">SECURITY</text>
    <text x="180" y="308" class="sub_text" text-anchor="middle">HOLDING_AREA</text>
    <rect x="110" y="180" width="140" height="240" class="hitbox" />
  </g>

  <!-- CAPA 3: METADATOS SISTEMA (Análisis de Misiones) -->
  <g id="ui_metadata" style="pointer-events: none;">
    <text x="20" y="30" class="label_text" style="fill: #004411;">AMINA // SISTEMA DE DISPOSICIÓN ESPACIAL</text>
    <text x="20" y="45" class="sub_text">REF: DIV_OPERACIONES_MEMBRANA // MONITOR_ACTIVO</text>
    <text x="600" y="580" class="sub_text" text-anchor="end">SISTEMA_INTEGRIDAD: OPERATIVO</text>
    <path d="M 610 577 H 780" stroke="#003311" stroke-width="0.5" />
  </g>
</svg>
